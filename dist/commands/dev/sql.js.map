{"version":3,"sources":["../../../src/commands/dev/sql.ts"],"sourcesContent":["import {ChatInputCommandInteraction, SlashCommandBuilder} from \"discord.js\";\nimport {db} from \"../../database.js\";\nimport {getEmbedTemplate} from \"../../ui/templates.js\";\n\nexport default {\n    data: new SlashCommandBuilder()\n        .setName(\"sql\")\n        .setDescription(\"Evaluates SQL queries using the main database\")\n        .addStringOption(option => option.setName(\"command\").setDescription(\"The SQL command\").setRequired(true)),\n    async execute(interaction: ChatInputCommandInteraction) {\n        const command = interaction.options.getString(\"command\");\n        const embed = getEmbedTemplate(interaction.client).setTitle(\"Result\");\n        try {\n            let output = \"\";\n            await db.each(command, (err, row) => {\n                if (err) {\n                    throw err;\n                }\n                output += JSON.stringify(row) + \"\\n\";\n            });\n            embed.setDescription(output);\n        } catch (err) {\n            embed.setDescription(err.toString());\n        }\n        await interaction.reply({embeds: [embed]});\n    }\n};\n"],"names":["SlashCommandBuilder","db","getEmbedTemplate","data","setName","setDescription","addStringOption","option","setRequired","execute","interaction","command","options","getString","embed","client","setTitle","output","each","err","row","JSON","stringify","toString","reply","embeds"],"mappings":"AAAA,SAAqCA,mBAAmB,QAAO,aAAa;AAC5E,SAAQC,EAAE,QAAO,oBAAoB;AACrC,SAAQC,gBAAgB,QAAO,wBAAwB;AAEvD,eAAe;IACXC,MAAM,IAAIH,sBACLI,OAAO,CAAC,OACRC,cAAc,CAAC,iDACfC,eAAe,CAACC,CAAAA,SAAUA,OAAOH,OAAO,CAAC,WAAWC,cAAc,CAAC,mBAAmBG,WAAW,CAAC,IAAI;IAC3G,MAAMC,SAAQC,WAAwC,EAAE;QACpD,MAAMC,UAAUD,YAAYE,OAAO,CAACC,SAAS,CAAC;QAC9C,MAAMC,QAAQZ,iBAAiBQ,YAAYK,MAAM,EAAEC,QAAQ,CAAC;QAC5D,IAAI;YACA,IAAIC,SAAS;YACb,MAAMhB,GAAGiB,IAAI,CAACP,SAAS,CAACQ,KAAKC,MAAQ;gBACjC,IAAID,KAAK;oBACL,MAAMA,IAAI;gBACd,CAAC;gBACDF,UAAUI,KAAKC,SAAS,CAACF,OAAO;YACpC;YACAN,MAAMT,cAAc,CAACY;QACzB,EAAE,OAAOE,KAAK;YACVL,MAAMT,cAAc,CAACc,IAAII,QAAQ;QACrC;QACA,MAAMb,YAAYc,KAAK,CAAC;YAACC,QAAQ;gBAACX;aAAM;QAAA;IAC5C;AACJ,EAAE"}