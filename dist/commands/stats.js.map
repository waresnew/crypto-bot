{"version":3,"sources":["../../src/commands/stats.ts"],"sourcesContent":["import {ChatInputCommandInteraction, SlashCommandBuilder} from \"discord.js\";\nimport {db} from \"../database.js\";\nimport {getEmbedTemplate} from \"../ui/templates.js\";\n\nexport default {\n    data: new SlashCommandBuilder().setName(\"stats\").setDescription(\"List bot stats\"),\n    async execute(interaction: ChatInputCommandInteraction) {\n        const embed = getEmbedTemplate(interaction.client)\n            .setTitle(\"Global statistics\")\n            .addFields(\n                {\n                    name: \"Server Count\",\n                    value: interaction.client.guilds.cache.size.toString()\n                },\n                {\n                    name: \"Total Commands Ran\",\n                    value: (await db.get(\"select commands_run_ever from global_stats\")).commands_run_ever.toString()\n                },\n                {\n                    name: \"Uptime\",\n                    value: formatTime(interaction.client.uptime)\n                }\n            );\n        await interaction.reply({embeds: [embed]});\n    }\n};\n\nfunction formatTime(milliseconds: number) {\n    const days = Math.floor(milliseconds / 86400000);\n    const hours = Math.floor((milliseconds % 86400000) / 3600000);\n    const minutes = Math.floor((milliseconds % 86400000 % 3600000) / 60000);\n    const seconds = Math.floor((milliseconds % 86400000 % 3600000 % 60000) / 1000);\n    return `${days} ${days != 1 ? \"days\" : \"day\"}, ${hours} ${hours != 1 ? \"hours\" : \"hour\"}, ${minutes} ${minutes != 1 ? \"minutes\" : \"minute\"}, ${seconds} ${seconds != 1 ? \"seconds\" : \"second\"}`;\n}"],"names":["SlashCommandBuilder","db","getEmbedTemplate","data","setName","setDescription","execute","interaction","embed","client","setTitle","addFields","name","value","guilds","cache","size","toString","get","commands_run_ever","formatTime","uptime","reply","embeds","milliseconds","days","Math","floor","hours","minutes","seconds"],"mappings":"AAAA,SAAqCA,mBAAmB,QAAO,aAAa;AAC5E,SAAQC,EAAE,QAAO,iBAAiB;AAClC,SAAQC,gBAAgB,QAAO,qBAAqB;AAEpD,eAAe;IACXC,MAAM,IAAIH,sBAAsBI,OAAO,CAAC,SAASC,cAAc,CAAC;IAChE,MAAMC,SAAQC,WAAwC,EAAE;QACpD,MAAMC,QAAQN,iBAAiBK,YAAYE,MAAM,EAC5CC,QAAQ,CAAC,qBACTC,SAAS,CACN;YACIC,MAAM;YACNC,OAAON,YAAYE,MAAM,CAACK,MAAM,CAACC,KAAK,CAACC,IAAI,CAACC,QAAQ;QACxD,GACA;YACIL,MAAM;YACNC,OAAO,AAAC,CAAA,MAAMZ,GAAGiB,GAAG,CAAC,6CAA4C,EAAGC,iBAAiB,CAACF,QAAQ;QAClG,GACA;YACIL,MAAM;YACNC,OAAOO,WAAWb,YAAYE,MAAM,CAACY,MAAM;QAC/C;QAER,MAAMd,YAAYe,KAAK,CAAC;YAACC,QAAQ;gBAACf;aAAM;QAAA;IAC5C;AACJ,EAAE;AAEF,SAASY,WAAWI,YAAoB,EAAE;IACtC,MAAMC,OAAOC,KAAKC,KAAK,CAACH,eAAe;IACvC,MAAMI,QAAQF,KAAKC,KAAK,CAAC,AAACH,eAAe,WAAY;IACrD,MAAMK,UAAUH,KAAKC,KAAK,CAAC,AAACH,eAAe,WAAW,UAAW;IACjE,MAAMM,UAAUJ,KAAKC,KAAK,CAAC,AAACH,eAAe,WAAW,UAAU,QAAS;IACzE,OAAO,CAAC,EAAEC,KAAK,CAAC,EAAEA,QAAQ,IAAI,SAAS,KAAK,CAAC,EAAE,EAAEG,MAAM,CAAC,EAAEA,SAAS,IAAI,UAAU,MAAM,CAAC,EAAE,EAAEC,QAAQ,CAAC,EAAEA,WAAW,IAAI,YAAY,QAAQ,CAAC,EAAE,EAAEC,QAAQ,CAAC,EAAEA,WAAW,IAAI,YAAY,QAAQ,CAAC,CAAC;AACnM"}