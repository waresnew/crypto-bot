{"version":3,"sources":["../src/deployCommands.ts"],"sourcesContent":["import { Command, REST, Routes } from \"discord.js\";\nimport fs from \"node:fs\";\nimport dotenv from \"dotenv\";\nimport path from \"node:path\";\nimport { fileURLToPath, pathToFileURL } from \"url\";\ndotenv.config();\n\nconst commands: Command[] = [];\nconst commandPath = path.join(path.dirname(fileURLToPath(import.meta.url)), \"commands\");\nconst commandFiles = fs.readdirSync(commandPath).filter(file => file.endsWith(\".js\"));\n\nfor (const file of commandFiles) {\n    const command = (await import(path.join(pathToFileURL(commandPath).toString(), file))).default;\n    commands.push(command.data.toJSON());\n}\n\nconst devCommands: Command[] = [];\nconst devCommandPath = path.join(path.dirname(fileURLToPath(import.meta.url)), \"commands\", \"dev\");\nconst devCommandFiles = fs.readdirSync(devCommandPath).filter(file => file.endsWith(\".js\"));\nfor (const file of devCommandFiles) {\n    const command = (await import(path.join(pathToFileURL(devCommandPath).toString(), file))).default;\n    devCommands.push(command.data.toJSON());\n}\nregisterCommands(devCommands, true);\nregisterCommands(commands, false);\n\nasync function registerCommands(commands: Command[], dev: boolean) {\n    const rest = new REST({ version: \"10\" }).setToken(process.env[\"BOT_TOKEN\"] as string);\n    try {\n        console.log(`Started refreshing ${commands.length} application (/) commands.`);\n        await rest.put(\n            dev\n                ? Routes.applicationGuildCommands(process.env[\"APP_ID\"] as string, process.env[\"GUILD_ID\"] as string)\n                : Routes.applicationCommands(process.env[\"APP_ID\"] as string),\n            { body: [] }\n        );\n        console.log(\"Successfully deleted all application commands.\");\n        await rest.put(\n            dev\n                ? Routes.applicationGuildCommands(process.env[\"APP_ID\"] as string, process.env[\"GUILD_ID\"] as string)\n                : Routes.applicationCommands(process.env[\"APP_ID\"] as string),\n            { body: commands }\n        );\n        console.log(\"Successfully reloaded the application (/) commands.\");\n    } catch (error) {\n        console.error(error);\n    }\n}\n"],"names":["REST","Routes","fs","dotenv","path","fileURLToPath","pathToFileURL","config","commands","commandPath","join","dirname","url","commandFiles","readdirSync","filter","file","endsWith","command","toString","default","push","data","toJSON","devCommands","devCommandPath","devCommandFiles","registerCommands","dev","rest","version","setToken","process","env","console","log","length","put","applicationGuildCommands","applicationCommands","body","error"],"mappings":"AAAA,SAAkBA,IAAI,EAAEC,MAAM,QAAQ,aAAa;AACnD,OAAOC,QAAQ,UAAU;AACzB,OAAOC,YAAY,SAAS;AAC5B,OAAOC,UAAU,YAAY;AAC7B,SAASC,aAAa,EAAEC,aAAa,QAAQ,MAAM;AACnDH,OAAOI,MAAM;AAEb,MAAMC,WAAsB,EAAE;AAC9B,MAAMC,cAAcL,KAAKM,IAAI,CAACN,KAAKO,OAAO,CAACN,cAAc,YAAYO,GAAG,IAAI;AAC5E,MAAMC,eAAeX,GAAGY,WAAW,CAACL,aAAaM,MAAM,CAACC,CAAAA,OAAQA,KAAKC,QAAQ,CAAC;AAE9E,KAAK,MAAMD,QAAQH,aAAc;IAC7B,MAAMK,UAAU,AAAC,CAAA,MAAM,MAAM,CAACd,KAAKM,IAAI,CAACJ,cAAcG,aAAaU,QAAQ,IAAIH,MAAK,EAAGI,OAAO;IAC9FZ,SAASa,IAAI,CAACH,QAAQI,IAAI,CAACC,MAAM;AACrC;AAEA,MAAMC,cAAyB,EAAE;AACjC,MAAMC,iBAAiBrB,KAAKM,IAAI,CAACN,KAAKO,OAAO,CAACN,cAAc,YAAYO,GAAG,IAAI,YAAY;AAC3F,MAAMc,kBAAkBxB,GAAGY,WAAW,CAACW,gBAAgBV,MAAM,CAACC,CAAAA,OAAQA,KAAKC,QAAQ,CAAC;AACpF,KAAK,MAAMD,SAAQU,gBAAiB;IAChC,MAAMR,WAAU,AAAC,CAAA,MAAM,MAAM,CAACd,KAAKM,IAAI,CAACJ,cAAcmB,gBAAgBN,QAAQ,IAAIH,OAAK,EAAGI,OAAO;IACjGI,YAAYH,IAAI,CAACH,SAAQI,IAAI,CAACC,MAAM;AACxC;AACAI,iBAAiBH,aAAa,IAAI;AAClCG,iBAAiBnB,UAAU,KAAK;AAEhC,eAAemB,iBAAiBnB,QAAmB,EAAEoB,GAAY,EAAE;IAC/D,MAAMC,OAAO,IAAI7B,KAAK;QAAE8B,SAAS;IAAK,GAAGC,QAAQ,CAACC,QAAQC,GAAG,CAAC,YAAY;IAC1E,IAAI;QACAC,QAAQC,GAAG,CAAC,CAAC,mBAAmB,EAAE3B,SAAS4B,MAAM,CAAC,0BAA0B,CAAC;QAC7E,MAAMP,KAAKQ,GAAG,CACVT,MACM3B,OAAOqC,wBAAwB,CAACN,QAAQC,GAAG,CAAC,SAAS,EAAYD,QAAQC,GAAG,CAAC,WAAW,IACxFhC,OAAOsC,mBAAmB,CAACP,QAAQC,GAAG,CAAC,SAAS,CAAW,EACjE;YAAEO,MAAM,EAAE;QAAC;QAEfN,QAAQC,GAAG,CAAC;QACZ,MAAMN,KAAKQ,GAAG,CACVT,MACM3B,OAAOqC,wBAAwB,CAACN,QAAQC,GAAG,CAAC,SAAS,EAAYD,QAAQC,GAAG,CAAC,WAAW,IACxFhC,OAAOsC,mBAAmB,CAACP,QAAQC,GAAG,CAAC,SAAS,CAAW,EACjE;YAAEO,MAAMhC;QAAS;QAErB0B,QAAQC,GAAG,CAAC;IAChB,EAAE,OAAOM,OAAO;QACZP,QAAQO,KAAK,CAACA;IAClB;AACJ"}