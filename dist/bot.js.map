{"version":3,"sources":["../src/bot.ts"],"sourcesContent":["import { Command, Client, Collection, Partials, GatewayIntentBits } from \"discord.js\";\nimport dotenv from \"dotenv\";\nimport fs from \"node:fs\";\nimport path from \"node:path\";\nimport { fileURLToPath, pathToFileURL } from \"url\";\nimport { initApiCrons } from \"./api/cmcApi.js\";\n\ndotenv.config();\nconst client = new Client({\n    intents: [\n        GatewayIntentBits.Guilds,\n        GatewayIntentBits.DirectMessages\n    ],\n    partials: [\n        Partials.Channel\n    ],\n    shards: \"auto\"\n});\ninitApiCrons();\nconst eventsPath = path.join(path.dirname(fileURLToPath(import.meta.url)), \"events\");\nconst eventFiles = fs.readdirSync(eventsPath).filter(file => file.endsWith(\".js\"));\nfor (const file of eventFiles) {\n    const filePath = path.join(eventsPath, file);\n    const event = (await import(pathToFileURL(filePath).toString())).default;\n    if (event.once) {\n        client.once(event.name, (...args) => event.execute(...args));\n    } else {\n        client.on(event.name, (...args) => event.execute(...args));\n    }\n}\nclient.commands = new Collection();\nconst commandsPath = path.join(path.dirname(fileURLToPath(import.meta.url)), \"commands\");\nregisterCommands(commandsPath);\nclient.login(process.env[\"BOT_TOKEN\"]);\nasync function registerCommands(curDir: string) {\n    const commandFiles = fs.readdirSync(curDir);\n    for (const file of commandFiles) {\n        const filePath = path.join(curDir, file);\n        if (file.endsWith(\".js\")) {\n            const command: Command = (await import(pathToFileURL(filePath).toString())).default;\n            client.commands.set(command.data.name, command);\n        } else if (fs.lstatSync(filePath).isDirectory()) {\n            registerCommands(filePath);\n        }\n    }\n}\n"],"names":["Client","Collection","Partials","GatewayIntentBits","dotenv","fs","path","fileURLToPath","pathToFileURL","initApiCrons","config","client","intents","Guilds","DirectMessages","partials","Channel","shards","eventsPath","join","dirname","url","eventFiles","readdirSync","filter","file","endsWith","filePath","event","toString","default","once","name","args","execute","on","commands","commandsPath","registerCommands","login","process","env","curDir","commandFiles","command","set","data","lstatSync","isDirectory"],"mappings":"AAAA,SAAkBA,MAAM,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,iBAAiB,QAAQ,aAAa;AACtF,OAAOC,YAAY,SAAS;AAC5B,OAAOC,QAAQ,UAAU;AACzB,OAAOC,UAAU,YAAY;AAC7B,SAASC,aAAa,EAAEC,aAAa,QAAQ,MAAM;AACnD,SAASC,YAAY,QAAQ,kBAAkB;AAE/CL,OAAOM,MAAM;AACb,MAAMC,SAAS,IAAIX,OAAO;IACtBY,SAAS;QACLT,kBAAkBU,MAAM;QACxBV,kBAAkBW,cAAc;KACnC;IACDC,UAAU;QACNb,SAASc,OAAO;KACnB;IACDC,QAAQ;AACZ;AACAR;AACA,MAAMS,aAAaZ,KAAKa,IAAI,CAACb,KAAKc,OAAO,CAACb,cAAc,YAAYc,GAAG,IAAI;AAC3E,MAAMC,aAAajB,GAAGkB,WAAW,CAACL,YAAYM,MAAM,CAACC,CAAAA,OAAQA,KAAKC,QAAQ,CAAC;AAC3E,KAAK,MAAMD,QAAQH,WAAY;IAC3B,MAAMK,WAAWrB,KAAKa,IAAI,CAACD,YAAYO;IACvC,MAAMG,QAAQ,AAAC,CAAA,MAAM,MAAM,CAACpB,cAAcmB,UAAUE,QAAQ,GAAE,EAAGC,OAAO;IACxE,IAAIF,MAAMG,IAAI,EAAE;QACZpB,OAAOoB,IAAI,CAACH,MAAMI,IAAI,EAAE,CAAC,GAAGC,OAASL,MAAMM,OAAO,IAAID;IAC1D,OAAO;QACHtB,OAAOwB,EAAE,CAACP,MAAMI,IAAI,EAAE,CAAC,GAAGC,OAASL,MAAMM,OAAO,IAAID;IACxD,CAAC;AACL;AACAtB,OAAOyB,QAAQ,GAAG,IAAInC;AACtB,MAAMoC,eAAe/B,KAAKa,IAAI,CAACb,KAAKc,OAAO,CAACb,cAAc,YAAYc,GAAG,IAAI;AAC7EiB,iBAAiBD;AACjB1B,OAAO4B,KAAK,CAACC,QAAQC,GAAG,CAAC,YAAY;AACrC,eAAeH,iBAAiBI,MAAc,EAAE;IAC5C,MAAMC,eAAetC,GAAGkB,WAAW,CAACmB;IACpC,KAAK,MAAMjB,QAAQkB,aAAc;QAC7B,MAAMhB,WAAWrB,KAAKa,IAAI,CAACuB,QAAQjB;QACnC,IAAIA,KAAKC,QAAQ,CAAC,QAAQ;YACtB,MAAMkB,UAAmB,AAAC,CAAA,MAAM,MAAM,CAACpC,cAAcmB,UAAUE,QAAQ,GAAE,EAAGC,OAAO;YACnFnB,OAAOyB,QAAQ,CAACS,GAAG,CAACD,QAAQE,IAAI,CAACd,IAAI,EAAEY;QAC3C,OAAO,IAAIvC,GAAG0C,SAAS,CAACpB,UAAUqB,WAAW,IAAI;YAC7CV,iBAAiBX;QACrB,CAAC;IACL;AACJ"}