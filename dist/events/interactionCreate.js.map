{"version":3,"sources":["../../src/events/interactionCreate.ts"],"sourcesContent":["import {Events, Interaction} from \"discord.js\";\nimport {db} from \"../database.js\";\nimport {interactionProcessors} from \"../utils.js\";\n\n// noinspection JSUnusedGlobalSymbols\nexport default {\n    name: Events.InteractionCreate,\n    async execute(interaction: Interaction) {\n        if (interaction.isChatInputCommand()) {\n            const command = interaction.client.commands.get(interaction.commandName);\n            if (!command) {\n                console.error(`No command matching ${interaction.commandName} was found.`);\n                return;\n            }\n            await db.run(\"update global_stats set commands_run_ever = commands_run_ever+1\");\n            await command.execute(interaction);\n\n        } else if (interaction.isAutocomplete()) {\n            const command = interaction.client.commands.get(interaction.commandName);\n            if (!command) {\n                console.error(`No command matching ${interaction.commandName} was found.`);\n                return;\n            }\n            await command.autocomplete(interaction);\n        } else if (interaction.isMessageComponent() || interaction.isModalSubmit()) {\n            const origin = interaction.customId.substring(0, interaction.customId.indexOf(\"_\"));\n            if (!interaction.customId.endsWith(interaction.user.id.toString())) {\n                interaction.reply({\n                    content: \"Error: You do not have permission to interact with this!\",\n                    ephemeral: true\n                });\n                return;\n            }\n            if (interaction.isButton()) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                await (interactionProcessors.get(origin) as any).processButton(interaction);\n            } else if (interaction.isStringSelectMenu()) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                await (interactionProcessors.get(origin) as any).processStringSelect(interaction);\n            } else if (interaction.isModalSubmit()) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                await (interactionProcessors.get(origin) as any).processModal(interaction);\n            }\n        }\n    }\n};"],"names":["Events","db","interactionProcessors","name","InteractionCreate","execute","interaction","isChatInputCommand","command","client","commands","get","commandName","console","error","run","isAutocomplete","autocomplete","isMessageComponent","isModalSubmit","origin","customId","substring","indexOf","endsWith","user","id","toString","reply","content","ephemeral","isButton","processButton","isStringSelectMenu","processStringSelect","processModal"],"mappings":"AAAA,SAAQA,MAAM,QAAoB,aAAa;AAC/C,SAAQC,EAAE,QAAO,iBAAiB;AAClC,SAAQC,qBAAqB,QAAO,cAAc;AAElD,qCAAqC;AACrC,eAAe;IACXC,MAAMH,OAAOI,iBAAiB;IAC9B,MAAMC,SAAQC,WAAwB,EAAE;QACpC,IAAIA,YAAYC,kBAAkB,IAAI;YAClC,MAAMC,UAAUF,YAAYG,MAAM,CAACC,QAAQ,CAACC,GAAG,CAACL,YAAYM,WAAW;YACvE,IAAI,CAACJ,SAAS;gBACVK,QAAQC,KAAK,CAAC,CAAC,oBAAoB,EAAER,YAAYM,WAAW,CAAC,WAAW,CAAC;gBACzE;YACJ,CAAC;YACD,MAAMX,GAAGc,GAAG,CAAC;YACb,MAAMP,QAAQH,OAAO,CAACC;QAE1B,OAAO,IAAIA,YAAYU,cAAc,IAAI;YACrC,MAAMR,WAAUF,YAAYG,MAAM,CAACC,QAAQ,CAACC,GAAG,CAACL,YAAYM,WAAW;YACvE,IAAI,CAACJ,UAAS;gBACVK,QAAQC,KAAK,CAAC,CAAC,oBAAoB,EAAER,YAAYM,WAAW,CAAC,WAAW,CAAC;gBACzE;YACJ,CAAC;YACD,MAAMJ,SAAQS,YAAY,CAACX;QAC/B,OAAO,IAAIA,YAAYY,kBAAkB,MAAMZ,YAAYa,aAAa,IAAI;YACxE,MAAMC,SAASd,YAAYe,QAAQ,CAACC,SAAS,CAAC,GAAGhB,YAAYe,QAAQ,CAACE,OAAO,CAAC;YAC9E,IAAI,CAACjB,YAAYe,QAAQ,CAACG,QAAQ,CAAClB,YAAYmB,IAAI,CAACC,EAAE,CAACC,QAAQ,KAAK;gBAChErB,YAAYsB,KAAK,CAAC;oBACdC,SAAS;oBACTC,WAAW,IAAI;gBACnB;gBACA;YACJ,CAAC;YACD,IAAIxB,YAAYyB,QAAQ,IAAI;gBACxB,8DAA8D;gBAC9D,MAAM,AAAC7B,sBAAsBS,GAAG,CAACS,QAAgBY,aAAa,CAAC1B;YACnE,OAAO,IAAIA,YAAY2B,kBAAkB,IAAI;gBACzC,8DAA8D;gBAC9D,MAAM,AAAC/B,sBAAsBS,GAAG,CAACS,QAAgBc,mBAAmB,CAAC5B;YACzE,OAAO,IAAIA,YAAYa,aAAa,IAAI;gBACpC,8DAA8D;gBAC9D,MAAM,AAACjB,sBAAsBS,GAAG,CAACS,QAAgBe,YAAY,CAAC7B;YAClE,CAAC;QACL,CAAC;IACL;AACJ,EAAE"}